<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kishan's Image Uploader</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* General Styles */
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #6a11cb, #2575fc);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 30px;
      width: 90%;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .upload-box {
      border: 2px dashed #fff;
      border-radius: 10px;
      padding: 20px;
      cursor: pointer;
      margin: 20px 0;
    }

    input[type="text"], input[type="password"] {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: none;
      border-radius: 5px;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }

    button {
      background: #fff;
      color: #6a11cb;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      cursor: pointer;
      margin: 10px;
      font-weight: 600;
    }

    .admin-panel {
      margin-top: 30px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      padding-top: 20px;
    }

    .history-item {
      margin: 10px 0;
      padding: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
    }

    .history-item a {
      color: #fff;
      text-decoration: none;
    }

    .history-item a:hover {
      text-decoration: underline;
    }

    .admin-login-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #fff;
      color: #6a11cb;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <!-- Admin Login Toggle Button -->
  <button class="admin-login-toggle" id="adminLoginToggle">Admin Login</button>

  <div class="container">
    <!-- Regular User Interface -->
    <div id="userInterface">
      <h1>Kishan's Image Uploader</h1>
      <div class="upload-box" onclick="document.getElementById('fileInput').click()">
        <i class="fas fa-cloud-upload-alt"></i>
        <p>Click to Upload</p>
        <input type="file" id="fileInput" accept="image/*" multiple>
      </div>
      <div class="history" id="userHistory">
        <h2>Your Uploads</h2>
        <div class="history-list" id="userHistoryList"></div>
      </div>
    </div>

    <!-- Admin Login Form -->
    <div id="adminLoginForm" style="display: none;">
      <h1>Admin Login</h1>
      <input type="text" id="adminUsername" placeholder="Username">
      <input type="password" id="adminPassword" placeholder="Password">
      <button onclick="adminLogin()">Login</button>
    </div>

    <!-- Admin Interface -->
    <div id="adminInterface" style="display: none;">
      <h1>Admin Panel</h1>
      <div class="history" id="adminHistory">
        <h2>All Uploads</h2>
        <div class="history-list" id="adminHistoryList"></div>
      </div>
      <button onclick="logoutAdmin()">Logout</button>
    </div>
  </div>

  <script>
    // Admin credentials (Change these!)
    const ADMIN_CREDENTIALS = {
      username: "admin",
      password: "MasterPassword123"
    };

    // DOM Elements
    const userInterface = document.getElementById('userInterface');
    const adminLoginForm = document.getElementById('adminLoginForm');
    const adminInterface = document.getElementById('adminInterface');
    const userHistoryList = document.getElementById('userHistoryList');
    const adminHistoryList = document.getElementById('adminHistoryList');
    const adminLoginToggle = document.getElementById('adminLoginToggle');

    // Toggle Admin Login Form
    adminLoginToggle.addEventListener('click', () => {
      adminLoginForm.style.display = 'block';
      userInterface.style.display = 'none';
      adminInterface.style.display = 'none';
    });

    // Regular user upload functionality
    const fileInput = document.getElementById('fileInput');
    fileInput.addEventListener('change', (e) => {
      const files = e.target.files;
      Array.from(files).forEach(file => handleFile(file));
    });

    // Handle file upload
    function handleFile(file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        uploadImage(file);
      };
      reader.readAsDataURL(file);
    }

    // Upload image to ImgBB
    async function uploadImage(file) {
      const API_KEY = "a42d5a374e86bb7a13b3daf1e7a02ae7"; // Replace with your ImgBB API key
      const formData = new FormData();
      formData.append('image', file);

      try {
        const response = await fetch(`https://api.imgbb.com/1/upload?key=${API_KEY}`, {
          method: 'POST',
          body: formData,
        });

        const data = await response.json();
        if (data.success) {
          addToUserHistory(data.data.url);
          addToAdminHistory(data.data.url);
        }
      } catch (error) {
        console.error('Upload error:', error);
      }
    }

    // Add to user's history
    function addToUserHistory(url) {
      let userHistory = JSON.parse(localStorage.getItem('userHistory')) || [];
      userHistory.unshift(url);
      localStorage.setItem('userHistory', JSON.stringify(userHistory));
      displayUserHistory();
    }

    // Add to admin's history (all uploads)
    function addToAdminHistory(url) {
      let adminHistory = JSON.parse(localStorage.getItem('adminHistory')) || [];
      adminHistory.unshift(url);
      localStorage.setItem('adminHistory', JSON.stringify(adminHistory));
      if (adminInterface.style.display === 'block') {
        displayAdminHistory();
      }
    }

    // Display user's history
    function displayUserHistory() {
      let userHistory = JSON.parse(localStorage.getItem('userHistory')) || [];
      userHistoryList.innerHTML = userHistory.map(url => `
        <div class="history-item">
          <a href="${url}" target="_blank">${url}</a>
        </div>
      `).join('');
    }

    // Display admin's history (all uploads)
    function displayAdminHistory() {
      let adminHistory = JSON.parse(localStorage.getItem('adminHistory')) || [];
      adminHistoryList.innerHTML = adminHistory.map(url => `
        <div class="history-item">
          <a href="${url}" target="_blank">${url}</a>
        </div>
      `).join('');
    }

    // Admin login
    function adminLogin() {
      const username = document.getElementById('adminUsername').value;
      const password = document.getElementById('adminPassword').value;

      if (username === kishan09.username && password === kishan09.password) {
        userInterface.style.display = 'none';
        adminLoginForm.style.display = 'none';
        adminInterface.style.display = 'block';
        displayAdminHistory();
      } else {
        alert('Invalid credentials');
      }
    }

    // Admin logout
    function logoutAdmin() {
      userInterface.style.display = 'block';
      adminLoginForm.style.display = 'none';
      adminInterface.style.display = 'none';
    }

    // Display user's history on page load
    displayUserHistory();
  </script>
</body>
</html>
